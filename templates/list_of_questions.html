{% extends "base.html" %} {% block title %}Question list{% endblock title %} {%
block content %}

<form action="/">
    <select
        class="form-select form-select-lg mb-3"
        aria-label=".form-select-lg example"
        name="order_by"
    >
        <option selected>Choose a criteria</option>
        <option value="title">Title</option>
        <option value="submission_time">Time</option>
        <option value="message">Message</option>
        <option value="view_number">Views</option>
        <option value="vote_number">Votes</option>
    </select>

    <select
        class="form-select form-select-lg mb-3"
        aria-label=".form-select-lg example"
        name="order_direction"
    >
        <option selected>Choose direction</option>
        <option value="asc">Ascending</option>
        <option value="desc">Descending</option>
    </select>
    <button class="btn btn-primary" type="submit">Sort</button>
</form>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Id</th>
            <th>Submission Time</th>
            <th>View Number</th>
            <th>Vote Number</th>
            <th>Title</th>
            <th>Message</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for question in questions %}
        <tr>
            <td>{{ question.id }}</td>
            <td>{{ question.submission_time | datetime }}</td>
            <td>{{ question.view_number }}</td>
            <td>{{ question.vote_number }}</td>
            <td>
                <a
                    href="{{ url_for('display_question_by_id', question_id=question.id) }}"
                    >{{ question.title }}</a
                >
            </td>
            <td>{{ question.message }}</td>
            <td>
                {% if question.image %}
                <img
                    src="{{ url_for('static', filename='images/' + question.image) }}"
                    alt="No image found"
                />
                {% endif %}
            </td>
            <td>
                <form
                    action="{{ url_for('vote_up_question', question_id=question.id)}}"
                >
                    <button class="btn btn-primary" type="submit">
                        Vote up
                    </button>
                </form>
                <form
                    action="{{ url_for('vote_down_question', question_id=question.id)}}"
                >
                    <button class="btn btn-danger" type="submit">
                        Vote down
                    </button>
                </form>
            </td>
        </tr>

        {% endfor %}
    </tbody>
</table>
<form class="btn btn-success" action="{{ url_for('add_new_question')}}">
    <button class="btn btn-success" type="submit">Add a question</button>
</form>

{% endblock %}
